# =============================================================================
# Tmux Configuration
# =============================================================================

# Use Ctrl-b as prefix (default)
set -g prefix C-b

# Enable mouse support
set -g mouse on

# Start windows and panes at 1, not 0
set -g base-index 1
setw -g pane-base-index 1

# Renumber windows when one is closed
set -g renumber-windows on

# Increase history limit
set -g history-limit 10000

# Faster key repetition
set -s escape-time 0

# Enable true colors
set -g default-terminal "tmux-256color"
set -ag terminal-overrides ",xterm-256color:RGB"

# Default shell
set -g default-shell /bin/zsh

# =============================================================================
# Key Bindings
# =============================================================================

# Unbind default session picker
unbind s

# Window management
bind c new-window -c "#{pane_current_path}"
bind x kill-pane

# Pane navigation (vim-style)
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Split panes
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"

# Resize panes
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# Reload config
bind r source-file ~/.tmux.conf \; display "Config reloaded!"

# =============================================================================
# Status Bar - Nord Theme
# =============================================================================

set -g status-position bottom
set -g status-style "bg=#3b4252,fg=#d8dee9"

# Left side
set -g status-left-length 40
set -g status-left "#[bg=#5e81ac,fg=#2e3440,bold] #S #[bg=#3b4252] "

# Right side
set -g status-right-length 60
set -g status-right "#[fg=#d8dee9] %H:%M #[bg=#5e81ac,fg=#2e3440,bold] %d-%b "

# Window tabs
set -g window-status-format " #I:#W "
set -g window-status-current-format "#[bg=#88c0d0,fg=#2e3440,bold] #I:#W "
set -g window-status-separator ""

# Pane borders
set -g pane-border-style "fg=#3b4252"
set -g pane-active-border-style "fg=#88c0d0"

# Message style
set -g message-style "bg=#ebcb8b,fg=#2e3440"

# =============================================================================
# Plugins (using tpm)
# =============================================================================

set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'

# Auto-save every 15 min and restore on tmux start
set -g @continuum-restore 'on'
set -g @resurrect-capture-pane-contents 'on'

# Initialize TPM (keep at bottom)
run '~/.config/tmux/plugins/tpm/tpm'
